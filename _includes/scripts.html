<!-- Bootstrap core JavaScript -->

<script src="{{'vendor/jquery/jquery.min.js' | relative_url}}"></script>
<script src="{{'vendor/bootstrap/js/bootstrap.bundle.js' | relative_url}}"></script>
<script src="{{'vendor/jquery-ui-bootstrap/js/jquery-ui-1.9.2.custom.min.JS' | relative_url}}"></script>
<script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.min.js"></script>

<!-- Contact form JavaScript -->
<!-- Do not edit these files! In order to set the email address and subject line for the contact form go to the bin/contact_me.php file. -->
<script src="{{'assets/js/jqBootstrapValidation.js' | relative_url}}"></script>
<script src="{{'assets/js/contact_me.js' | relative_url}}"></script>
<!-- select2 Js -->
<script src="{{'vendor/select2/js/select2.min.js' | relative_url}}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.6/gsap.min.js"></script>
<script src="{{'assets/js/locomotive-scroll.min.js'  | relative_url }}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/animation.gsap.min.js"></script>

<!-- Custom -->
<script src="{{'assets/js/custom.js' | relative_url}}"></script>



<script>
var locoScroll; 
$(document).ready(function() {
  

  locoScroll = new LocomotiveScroll({

    el: document.querySelector('#wrapper'),
    smooth: true,
    getSpeed: true,
    getDirection: true,
    useKeyboard: true
  });

  $('.search').click((e)=>{
    e.preventDefault()
    let target = document.querySelector('.section-padding');
    locoScroll.scrollTo(target)
  })

  filterInit();

  function filterInit() {
    // external js: isotope.pkgd.js

    // store filter for each group
    var buttonFilters = {};
    var buttonFilter;
    // quick search regex
    var qsRegex;

    // init Isotope
    var $grid = $('.grid').isotope({
      itemSelector: '.cars',
      filter: function () {
        var $this = $(this);
        var searchResult = qsRegex ? $this.text().match(qsRegex) : true;
        var buttonResult = buttonFilter ? $this.is(buttonFilter) : true;
        return searchResult && buttonResult;
      },
    });

    $('.filters').on('click', 'a', function (e) {

      e.preventDefault()
      var $this = $(this);
      // get group key
      var $buttonGroup = $this.parents('.button-group');
      var filterGroup = $buttonGroup.attr('data-filter-group');
      // set filter for group
      buttonFilters[filterGroup] = $this.attr('data-filter');
      // combine filters
      buttonFilter = concatValues(buttonFilters);
      // Isotope arrange
      $grid.isotope();
    });

    // use value of search field to filter
    var $quicksearch = $('.quicksearch').keyup(debounce(function () {
      qsRegex = new RegExp($quicksearch.val(), 'gi');
      $grid.isotope();
    }));

    // change is-checked class on buttons
    $('.button-group').each(function (i, buttonGroup) {
      var $buttonGroup = $(buttonGroup);
      $buttonGroup.on('click', 'button', function () {
        $buttonGroup.find('.is-checked').removeClass('is-checked');
        $(this).addClass('is-checked');
      });
    });

    // flatten object by concatting values
    function concatValues(obj) {
      var value = '';
      for (var prop in obj) {
        value += obj[prop];
      }
      return value;
    }

    // debounce so filtering doesn't happen every millisecond
    function debounce(fn, threshold) {
      var timeout;
      threshold = threshold || 100;
      return function debounced() {
        clearTimeout(timeout);
        var args = arguments;
        var _this = this;
        function delayed() {
          fn.apply(_this, args);
        }
        timeout = setTimeout(delayed, threshold);
      };
    }

  }

});

</script>